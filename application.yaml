apiVersion: argoproj.io/v1alpha1

kind: Application
metadata:
    name: myapp-argo-application
    namespace: argocd
spec:
    project: default

    source:
        repoURL: https://github.com/samaxlcm/argocd-app-config.git
        # targetRevision: HEAD
        targetRevision: master
        path: dev
        # helm:
        #     valueFiles:
        #         - values.yaml

    destination:
        server: https://kubernetes.default.svc
        namespace: myapp

    syncPolicy:
        syncOptions:
            - CreateNamespace=true
            - Validate=true

        automated:
            selfHeal: true
            prune: true

revisionHistoryLimit: 10
